!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=7)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.compose},,function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setSettings",(function(){return _})),r.d(n,"toggleModal",(function(){return d})),r.d(n,"setEditor",(function(){return b})),r.d(n,"setCurrentView",(function(){return g})),r.d(n,"setViewSettings",(function(){return w}));var i={};r.r(i),r.d(i,"getSettings",(function(){return E})),r.d(i,"getModal",(function(){return N})),r.d(i,"getEditor",(function(){return h})),r.d(i,"getCurrentView",(function(){return C})),r.d(i,"getCurrentViewSettings",(function(){return v})),r.d(i,"getState",(function(){return I}));var o=r(0),l=r.n(o),c=r(4),a=r(1),s=r(2),u=name="web-stories-mce";function _(e){return{type:"SET_SETTINGS",settings:e}}function d(e){return{type:"TOGGLE_MODAL",modalOpen:e}}function b(e){return{type:"SET_EDITOR",editor:e}}function g(e){return{type:"SET_CURRENT_VIEW",currentView:e}}function w(e,t){return{type:"SET_VIEW_SETTINGS",view:e,settings:t}}const{webStoriesData:f}=window,j=e=>{let{fieldObj:t,field:r,hidden:n=!1}=e;const i=Object(a.select)(u).getCurrentViewSettings();let o=i;switch(typeof t){case"object":if(!n){const{show:e}=t;o={...i,[r]:{...t,show:!e}}}break;default:o={...i,[r]:t}}Object(a.dispatch)(u).setViewSettings(Object(a.select)(u).getCurrentView(),o)},p=()=>{let e="[web_stories";const t=Object(a.select)(u).getEditor(),r=Object(a.select)(u).getCurrentViewSettings();return t&&Object.keys(r).forEach((t=>{const n=r[t],i="object"==typeof n?n.show.toString():n.toString();e+=` ${t.toString()}="${i}"`})),e+=" /]",e},m={settings:{},modalOpen:!1,editor:!1,currentView:"circles"};m.settings=(()=>{const e=[],{views:t,fields:r}=f;return t.forEach((t=>{const{value:n}=t,{title:i,author:o,date:l,excerpt:c,archive_link:a,sharp_corners:s}=r[n];e[n]={title:i,excerpt:c,author:o,date:l,archive_link:a,archive_link_label:"",circle_size:150,sharp_corners:s,image_alignment:"left",number_of_columns:1,number_of_stories:5,order:"DESC",orderby:"post_title",view:n}})),e})();var O=m;var M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SETTINGS":return{...e,settings:t.settings};case"TOGGLE_MODAL":return{...e,modalOpen:t.modalOpen};case"SET_EDITOR":return{...e,editor:t.editor};case"SET_CURRENT_VIEW":return{...e,currentView:t.currentView};case"SET_VIEW_SETTINGS":return{...e,settings:{...e.settings,[t.view]:t.settings}};default:return e}};function E(e){return e.settings}function N(e){return e.modalOpen}function h(e){return e.editor}function C(e){return e.currentView}function v(e){const t=Object(a.select)(u).getCurrentView();return e.settings[t]}function I(e){return e}var S=Object(a.registerStore)(u,{actions:n,reducer:M,selectors:i}),y=r(5),T=r(3);var Toggle=e=>{const{fieldObj:t={},field:r}=e,{show:n,hidden:i,label:o}=t;return i?null:l.a.createElement(T.ToggleControl,{label:o,checked:n,onChange:()=>{j({fieldObj:t,field:r,hidden:i})}})};var Modal=e=>{const{modalOpen:t,settings:r,prepareShortCode:n}=e,{author:i,date:o,title:c,number_of_stories:_,order:d,orderby:b,view:g,excerpt:w,image_alignment:p,archive_link:m,circle_size:O,number_of_columns:M,sharp_corners:E,archive_link_label:N}=r,{views:h={},fields:C}=f,v=e=>(null==C?void 0:C[g][e].show)&&!(null!=C&&C[g][e].hidden);return t?l.a.createElement(T.Modal,{onRequestClose:()=>{Object(a.dispatch)(u).toggleModal(!1)},closeButtonLabel:Object(s.__)("Close","web-stories"),title:Object(s.__)("Web Stories","web-stories"),className:"component_web_stories_mce_model",shouldCloseOnClickOutside:!1},l.a.createElement(T.SelectControl,{label:Object(s.__)("Select Layout","web-stories"),value:g,options:h,onChange:e=>{Object(a.dispatch)(u).setCurrentView(e)}}),l.a.createElement(T.RangeControl,{label:Object(s.__)("Number of Stories","web-stories"),value:_,min:1,max:20,onChange:e=>{j({fieldObj:Number(e),field:"number_of_stories"})}}),l.a.createElement(T.SelectControl,{label:Object(s.__)("Order By","web-stories"),value:b,options:[{value:"post_date",label:Object(s.__)("Date","web-stories")},{value:"post_title",label:Object(s.__)("Title","web-stories")}],onChange:e=>{j({fieldObj:e,field:"orderby"})}}),l.a.createElement(T.SelectControl,{label:Object(s.__)("Order","web-stories"),value:d,options:[{value:"ASC",label:Object(s.__)("Ascending","web-stories")},{value:"DESC",label:Object(s.__)("Descending","web-stories")}],onChange:e=>{j({fieldObj:e,field:"order"})}}),l.a.createElement(Toggle,{field:"title",fieldObj:c}),l.a.createElement(Toggle,{field:"excerpt",fieldObj:w}),l.a.createElement(Toggle,{field:"author",fieldObj:i}),l.a.createElement(Toggle,{field:"date",fieldObj:o}),v("image_alignment")&&l.a.createElement("div",{style:{margin:"0 0 10px 0"}},l.a.createElement(T.RadioControl,{label:Object(s.__)("Image Alignment","web-stories"),selected:p,options:[{value:"left",label:Object(s.__)("Left","web-stories")},{value:"right",label:Object(s.__)("Right","web-stories")}],onChange:e=>{j({fieldObj:e,field:"image_alignment"})}})),l.a.createElement(Toggle,{field:"sharp_corners",fieldObj:E}),l.a.createElement(Toggle,{field:"archive_link",fieldObj:m}),(null==m?void 0:m.show)&&l.a.createElement(T.TextControl,{label:Object(s.__)("Archive Link Label","web-stories"),value:N,onChange:e=>{j({fieldObj:e,field:"archive_link_label"})}}),(null==O?void 0:O.show)&&l.a.createElement(T.RangeControl,{label:Object(s.__)("Circle Size","web-stories"),value:O,min:80,max:200,step:5,onChange:e=>j({fieldObj:Number(e),field:"circle_size"})}),v("number_of_columns")&&l.a.createElement(T.RangeControl,{label:Object(s.__)("Number of Columns","web-stories"),value:M,min:1,max:4,onChange:e=>j({fieldObj:Number(e),field:"number_of_columns"})}),l.a.createElement("div",{style:{padding:"20px 0"},className:"alignright"},l.a.createElement(T.Button,{isPrimary:!0,onClick:()=>{const e=Object(a.select)(u).getEditor();if(e){const t=n();e.insertContent(t)}Object(a.dispatch)(u).toggleModal(!1)}},Object(s.__)("Insert","web-stories")),l.a.createElement(T.Button,{onClick:()=>Object(a.dispatch)(u).toggleModal(!1)},Object(s.__)("Cancel","web-stories")))):null};var D=Object(y.compose)([Object(a.withSelect)((e=>({modalOpen:e(u).getModal(),settings:e(u).getCurrentViewSettings(),prepareShortCode:p})))])(Modal);const{_:x}=window;x.hasOwnProperty("pluck")||(x.pluck=x.map);S.subscribe((()=>(()=>{const e=document.getElementById("web-stories-tinymce");e&&Object(c.render)(l.a.createElement(D,null),e)})())),tinymce.PluginManager.add("web_stories",(function(e){e.addButton("web_stories",{text:Object(s.__)("Web Stories","web-stories"),classes:"web-stories",image:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjA4IiBoZWlnaHQ9IjIwOCIgdmlld0JveD0iMCAwIDIwOCAyMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iMTAwIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMTM1LjIgNjIuNDAwNUMxNDAuOTQ0IDYyLjQwMDUgMTQ1LjYgNjcuMDU2NyAxNDUuNiA3Mi44MDA1VjEzNS4yQzE0NS42IDE0MC45NDQgMTQwLjk0NCAxNDUuNiAxMzUuMiAxNDUuNlY2Mi40MDA1WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTU3LjIgNjIuNDAwNUM1Ny4yIDU2LjY1NjcgNjEuODU2MiA1Mi4wMDA1IDY3LjYgNTIuMDAwNUgxMTQuNEMxMjAuMTQ0IDUyLjAwMDUgMTI0LjggNTYuNjU2NyAxMjQuOCA2Mi40MDA1VjE0NS42QzEyNC44IDE1MS4zNDQgMTIwLjE0NCAxNTYgMTE0LjQgMTU2SDY3LjZDNjEuODU2MiAxNTYgNTcuMiAxNTEuMzQ0IDU3LjIgMTQ1LjZWNjIuNDAwNVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNTYgNzIuODAwNUMxNjAuMzA4IDcyLjgwMDUgMTYzLjggNzYuMjkyNyAxNjMuOCA4MC42MDA1VjEyNy40QzE2My44IDEzMS43MDggMTYwLjMwOCAxMzUuMiAxNTYgMTM1LjJWNzIuODAwNVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPg==",onclick:function(){Object(a.dispatch)(u).setEditor(e),Object(a.dispatch)(u).toggleModal(!0)}})}))}]);